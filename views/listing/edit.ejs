<% layout("layout/boilerplate.ejs") %>
<body>
    <br>
    <h1>Edit your listing</h1><br>

    <form method="post" enctype="multipart/form-data"  class="needs-validation" novalidate action="/listings/<%= Listing._id %>?_method=PUT">
        <div class="mb-3"   >
        <label class="form-label"for="title">title:</label>
        <input  type="text" id="title" class="form-control" name="title" value="<%= Listing.title %>" required>
        <div class="invalid-feedback">
            title must be required.
          </div>
          <div class="valid-feedback">
            valid title.
          </div>
        </div>

        <div class="mb-3"   >
        <label class="form-label" for="description">description:</label>
        <textarea  id="description" rows="3" class="form-control" name="description" required><%= Listing.description %></textarea>
        <div class="invalid-feedback">
            description must be required.
        </div>
        <div class="valid-feedback">
            valid description.
          </div>
        </div>
         
        <div class="row">
            <div class="mb-3 col-5"   >
                <label class="form-label" for="price">price:</label>
                <input type="number" name="price" class="form-control" required id="price" value="<%= Listing.price %>">
                <div class="invalid-feedback">
                    price should be required.
                 </div>
                 <div class="valid-feedback">
                     Ok.
                 </div>
            </div>
            <div class="mb-3 col-7"   >
                <label class="form-label" for="country">country:</label>
                <input type="text" name="country" class="form-control" required id="country" value="<%= Listing.country %>">
                <div class="invalid-feedback">
                    country name must be required.
                </div>
                <div class="valid-feedback">
                    valid country.
                </div>
            </div>
        </div>

        
        <div class="prev-img mb-1">
            <p>Orginal Listing Image</p>
            <img src="<%= originalImageUrl %>" alt="">
        </div>
        <div class="row">
            <div class="mb-3 col-8">
                <label class="form-label" for="image">image:</label>
                <input type="file" name="image" class="form-control" id="image" >
                <div class="invalid-feedback">
                    image must be required.
                </div>

                <div class="valid-feedback">
                    valid image.
                </div>
            </div>

            <div class="mb-3 mt-1 col-4">
                <label for="category">Category:</label><br>
                <select name="category" class="mt-1 form-select" id="category"> 
                   <option selected>Choose a Category</option>
                   <% categories.forEach(category => { %>
                    <option value="<%= category %>"><%= category %></option>
                   <% }) %>
                </select>      
            </div>

        </div>

        <div class="mb-3"   >
            <label class="form-label" for="location">location:</label>
            <input type="text" name="location" required class="form-control" id="location" value="<%= Listing.location %>">
            <div class="invalid-feedback">
                location must be required.
            </div>
            <div class="valid-feedback">
                valid location.
            </div>
        </div> 
        <button class="btn edit-btn">submit</button>
        <br><br>
    </form>
</body>